<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ì´ˆì„± ì†ë‹´ ë§ì¶”ê¸° ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            padding: 20px;
            max-width: 500px;
            width: 100%;
            max-height: 95vh;
            overflow-y: auto;
        }

        h1 {
            text-align: center;
            color: #333;
            font-size: 1.8em;
            margin-bottom: 8px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            padding: 18px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
            touch-action: manipulation;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-practice {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-challenge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-hint {
            background: linear-gradient(135deg, #ffd89b 0%, #ffa726 100%);
            flex: 1;
            font-size: 1em;
        }

        .btn-submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            flex: 1.5;
            font-size: 1em;
        }

        .btn-skip {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            flex: 1;
            font-size: 1em;
        }

        .btn-back {
            background: #95a5a6;
            padding: 12px 16px;
            min-width: 50px;
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .lives {
            display: flex;
            gap: 3px;
        }

        .heart {
            font-size: 20px;
        }

        .heart.empty {
            opacity: 0.3;
        }

        .score {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .star {
            color: #f39c12;
        }

        .question-info {
            text-align: center;
            font-size: 0.9em;
            min-width: 120px;
        }

        .timer-container {
            margin-top: 8px;
            width: 100%;
        }

        .timer-display {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .timer-display.warning {
            color: #e74c3c;
            animation: pulse-timer 0.5s infinite;
        }

        @keyframes pulse-timer {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .timer-bar-container {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 5px;
        }

        .timer-bar {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c 0%, #f39c12 33%, #2ecc71 66%, #3498db 100%);
            transition: width 1s linear;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .timer-bar.warning {
            background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);
            animation: blink-bar 0.5s infinite;
        }

        @keyframes blink-bar {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .initials-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #fce4ec 100%);
            border-radius: 16px;
            padding: 30px 15px;
            text-align: center;
            margin-bottom: 15px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .initials {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            letter-spacing: 4px;
            word-break: break-all;
            line-height: 1.4;
        }

        .hint-box {
            background: #fff9c4;
            border: 2px solid #fbc02d;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 15px;
            color: #333;
            font-size: 0.9em;
        }

        .feedback {
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            animation: pulse 0.5s;
            font-size: 0.95em;
            word-break: keep-all;
            white-space: normal;
            line-height: 1.5;
        }

        .feedback.correct {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .feedback.wrong {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .input-box {
            width: 100%;
            padding: 14px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 12px;
            margin-bottom: 15px;
            transition: border 0.3s;
            -webkit-appearance: none;
        }

        .input-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }

        .back-button-row {
            display: flex;
            justify-content: center;
        }

        .result-box {
            text-align: center;
        }

        .rank {
            font-size: 4em;
            font-weight: bold;
            color: #667eea;
            margin: 15px 0;
        }

        .stats {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .stat-item {
            font-size: 1.1em;
            margin: 8px 0;
        }

        .trophy {
            font-size: 3.5em;
            margin-bottom: 15px;
        }

        .small-text {
            font-size: 0.85em;
            opacity: 0.8;
            margin-top: 4px;
        }

        .tip {
            text-align: center;
            color: #666;
            margin-top: 20px;
            font-size: 0.85em;
        }

        .credit {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #667eea;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        @media (max-width: 400px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 1.5em;
            }
            .initials {
                font-size: 1.6em;
                letter-spacing: 3px;
            }
            .btn {
                padding: 15px;
                font-size: 0.95em;
            }
        }

        @supports (padding: max(0px)) {
            body {
                padding-left: max(10px, env(safe-area-inset-left));
                padding-right: max(10px, env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <div class="container" id="app"></div>
    <div class="credit">í¬ì •ì´ê°€ ë§Œë“¤ì—ˆìŒ ğŸ’</div>

    <script>
        const proverbs = [
            // ì‰¬ì›€ (Easy) - 40ê°œ
            { text: "ê°€ëŠ” ë§ì´ ê³ ì™€ì•¼ ì˜¤ëŠ” ë§ì´ ê³±ë‹¤", hint: "ë§ì„ ê³ ìš°ê²Œ í•´ì•¼ ìƒëŒ€ë°©ë„ ì¢‹ì€ ë§ë¡œ ëŒ€ë‹µí•œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ê³ ìƒ ëì— ë‚™ì´ ì˜¨ë‹¤", hint: "ì–´ë ¤ì›€ì„ ê²ªì€ í›„ì— ì¦ê±°ì›€ì´ ì°¾ì•„ì˜¨ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "í‹°ëŒ ëª¨ì•„ íƒœì‚°", hint: "ì‘ì€ ê²ƒë„ ëª¨ìœ¼ë©´ í° ê²ƒì´ ëœë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì„¸ ì‚´ ë²„ë¦‡ ì—¬ë“ ê¹Œì§€ ê°„ë‹¤", hint: "ì–´ë¦´ ë•Œ ìŠµê´€ì´ í‰ìƒ ê°„ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë°±ì§€ì¥ë„ ë§ë“¤ë©´ ë‚«ë‹¤", hint: "ì‰¬ìš´ ì¼ë„ í˜‘ë ¥í•˜ë©´ ë” ì˜ëœë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì†Œ ìƒê³  ì™¸ì–‘ê°„ ê³ ì¹œë‹¤", hint: "ì¼ì„ ì´ë¯¸ ê·¸ë¥´ì¹œ ë’¤ì— ì†ì„ ì“´ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ëˆ„ì›Œì„œ ë–¡ ë¨¹ê¸°", hint: "ì•„ì£¼ ì‰¬ìš´ ì¼ì„ ë¹„ìœ í•˜ëŠ” ë§", difficulty: "easy" },
            { text: "í•˜ëŠ˜ì˜ ë³„ ë”°ê¸°", hint: "ë§¤ìš° ì–´ë µê±°ë‚˜ ë¶ˆê°€ëŠ¥í•œ ì¼ì„ ë¹„ìœ í•˜ëŠ” ë§", difficulty: "easy" },
            { text: "ì—´ ë²ˆ ì°ì–´ ì•ˆ ë„˜ì–´ê°€ëŠ” ë‚˜ë¬´ ì—†ë‹¤", hint: "ëˆê¸° ìˆê²Œ ë…¸ë ¥í•˜ë©´ ëœë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ìš°ë¬¼ ì•ˆ ê°œêµ¬ë¦¬", hint: "ì„¸ìƒ ë¬¼ì •ì„ ëª¨ë¥´ëŠ” ì‚¬ëŒì„ ë¹„ìœ í•˜ëŠ” ë§", difficulty: "easy" },
            { text: "ê¿© ë¨¹ê³  ì•Œ ë¨¹ê³ ", hint: "í•œ ê°€ì§€ ì¼ë¡œ ë‘ ê°€ì§€ ì´ìµì„ ë³¸ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë°œ ì—†ëŠ” ë§ì´ ì²œ ë¦¬ ê°„ë‹¤", hint: "ë§ì´ ë¹¨ë¦¬ í¼ì§„ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì‹ì€ ì£½ ë¨¹ê¸°", hint: "ë§¤ìš° ì‰¬ìš´ ì¼ì„ ë¹„ìœ í•˜ëŠ” ë§", difficulty: "easy" },
            { text: "ë²¼ëŠ” ìµì„ìˆ˜ë¡ ê³ ê°œë¥¼ ìˆ™ì¸ë‹¤", hint: "ì‚¬ëŒì€ ì˜ë ìˆ˜ë¡ ê²¸ì†í•´ì•¼ í•œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë‚®ë§ì€ ìƒˆê°€ ë“£ê³  ë°¤ë§ì€ ì¥ê°€ ë“£ëŠ”ë‹¤", hint: "ë§ì¡°ì‹¬í•˜ë¼ëŠ” ëœ»", difficulty: "easy" },
            { text: "ëŒë‹¤ë¦¬ë„ ë‘ë“¤ê²¨ ë³´ê³  ê±´ë„ˆë¼", hint: "ì¡°ì‹¬í•˜ê³  ë˜ ì¡°ì‹¬í•˜ë¼ëŠ” ëœ»", difficulty: "easy" },
            { text: "ê°œêµ¬ë¦¬ ì˜¬ì±™ì´ ì  ìƒê° ëª»í•œë‹¤", hint: "ì˜ë˜ê³  ë‚˜ë©´ ê³¼ê±°ë¥¼ ìŠëŠ”ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ê°€ì¬ëŠ” ê²Œ í¸", hint: "ë¹„ìŠ·í•œ ì²˜ì§€ë¼ë¦¬ ì„œë¡œ í¸ë“ ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ê³ ë˜ ì‹¸ì›€ì— ìƒˆìš° ë“± í„°ì§„ë‹¤", hint: "ê°•í•œ ìë“¤ì˜ ì‹¸ì›€ì— ì•½í•œ ìê°€ í”¼í•´ë¥¼ ë³¸ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ê¸ˆê°•ì‚°ë„ ì‹í›„ê²½", hint: "ì•„ë¬´ë¦¬ ì¢‹ì€ ì¼ë„ ë¨¹ê³  ë‚˜ì„œ í•´ì•¼ í•œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë‚« ë†“ê³  ê¸°ì—­ìë„ ëª¨ë¥¸ë‹¤", hint: "ì•„ì£¼ ë¬´ì‹í•˜ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë‹¬ë„ ì°¨ë©´ ê¸°ìš´ë‹¤", hint: "ì¢‹ì€ ì¼ë„ ì˜¤ë˜ê°€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë–¡ ì¤„ ì‚¬ëŒì€ ìƒê°ë„ ì•ˆ í•˜ëŠ”ë° ê¹€ì¹«êµ­ë¶€í„° ë§ˆì‹ ë‹¤", hint: "ì¼ì´ ë˜ì§€ë„ ì•Šì•˜ëŠ”ë° ë¯¸ë¦¬ ê¸°ëŒ€í•œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë§ì„ ëƒ‡ê°€ì— ëŒê³  ê°ˆ ìˆ˜ëŠ” ìˆì–´ë„ ì–µì§€ë¡œ ë¬¼ì„ ë¨¹ì¼ ìˆ˜ëŠ” ì—†ë‹¤", hint: "ë³¸ì¸ì´ ì›í•˜ì§€ ì•Šìœ¼ë©´ ì•ˆ ëœë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë¯¸ìš´ ì•„ì´ ë–¡ í•˜ë‚˜ ë” ì¤€ë‹¤", hint: "ë‚˜ìœ ì‚¬ëŒì¼ìˆ˜ë¡ ë” ì˜ ëŒ€í•´ì¤€ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë°±ë¬¸ì´ ë¶ˆì—¬ì¼ê²¬", hint: "ë°± ë²ˆ ë“£ëŠ” ê²ƒì´ í•œ ë²ˆ ë³´ëŠ” ê²ƒë§Œ ëª»í•˜ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì„œë‹¹ ê°œ ì‚¼ ë…„ì´ë©´ í’ì›”ì„ ìŠëŠ”ë‹¤", hint: "ì˜¤ë˜ ë³´ê³  ë“¤ìœ¼ë©´ ì €ì ˆë¡œ ë°°ìš´ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì„¸ ì¹˜ í˜€ê°€ ì‚¬ëŒ ì¡ëŠ”ë‹¤", hint: "ë§ í•œë§ˆë””ê°€ ì‚¬ëŒì„ ì£½ì¼ ìˆ˜ë„ ìˆë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì‹¼ ê²Œ ë¹„ì§€ë–¡", hint: "ê°’ì‹¼ ë¬¼ê±´ì€ í’ˆì§ˆì´ ë‚˜ì˜ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì•½ë°©ì— ê°ì´ˆ", hint: "ì–´ë””ì—ë‚˜ ë¹ ì§€ì§€ ì•ŠëŠ” ì‚¬ëŒì´ë‚˜ ë¬¼ê±´", difficulty: "easy" },
            { text: "ì—´ ì†ê°€ë½ ê¹¨ë¬¼ì–´ ì•ˆ ì•„í”ˆ ì†ê°€ë½ ì—†ë‹¤", hint: "ìì‹ì€ ëª¨ë‘ ì†Œì¤‘í•˜ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì›ƒëŠ” ë‚¯ì— ì¹¨ ëª» ë±‰ëŠ”ë‹¤", hint: "ì¹œì ˆí•œ ì‚¬ëŒì—ê²ŒëŠ” í•¨ë¶€ë¡œ ëª»í•œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì§€ë ì´ë„ ë°Ÿìœ¼ë©´ ê¿ˆí‹€í•œë‹¤", hint: "ì•½í•œ ì‚¬ëŒë„ í™”ë‚˜ë©´ ëŒ€ë“ ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì²œ ë¦¬ ê¸¸ë„ í•œ ê±¸ìŒë¶€í„°", hint: "í° ì¼ë„ ì‘ì€ ê²ƒë¶€í„° ì‹œì‘í•´ì•¼ í•œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "í•˜ëŠ˜ì´ ë¬´ë„ˆì ¸ë„ ì†Ÿì•„ë‚  êµ¬ë©ì´ ìˆë‹¤", hint: "ì–´ë ¤ìš´ ì¼ì—ë„ í•´ê²°ì±…ì€ ìˆë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "í˜¸ë‘ì´ë„ ì œ ë§ í•˜ë©´ ì˜¨ë‹¤", hint: "ëˆ„êµ¬ ì´ì•¼ê¸°ë¥¼ í•˜ë©´ ê·¸ ì‚¬ëŒì´ ë‚˜íƒ€ë‚œë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì‹œì‘ì´ ë°˜ì´ë‹¤", hint: "ì¼ì„ ì‹œì‘í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ë§ì´ ì”¨ê°€ ëœë‹¤", hint: "ë§í•œ ëŒ€ë¡œ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "ì°¸ëŠ” ìì—ê²Œ ë³µì´ ì˜¨ë‹¤", hint: "ì¸ë‚´í•˜ë©´ ì¢‹ì€ ì¼ì´ ìƒê¸´ë‹¤ëŠ” ëœ»", difficulty: "easy" },
            { text: "í”¼ëŠ” ë¬¼ë³´ë‹¤ ì§„í•˜ë‹¤", hint: "í˜ˆìœ¡ì˜ ì •ì€ ë‹¤ë¥¸ ê´€ê³„ë³´ë‹¤ ê¹Šë‹¤ëŠ” ëœ»", difficulty: "easy" },

            // ë³´í†µ (Medium) - 40ê°œ
            { text: "ì›ìˆ­ì´ë„ ë‚˜ë¬´ì—ì„œ ë–¨ì–´ì§„ë‹¤", hint: "ëˆ„êµ¬ë‚˜ ì‹¤ìˆ˜í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê¸‰í• ìˆ˜ë¡ ëŒì•„ê°€ë¼", hint: "ì„œë‘ë¥´ë©´ ì˜¤íˆë ¤ ì‹¤ìˆ˜í•˜ë‹ˆ ì‹ ì¤‘í•˜ê²Œ í•˜ë¼ëŠ” ëœ»", difficulty: "medium" },
            { text: "ìœ—ë¬¼ì´ ë§‘ì•„ì•¼ ì•„ë«ë¬¼ì´ ë§‘ë‹¤", hint: "ìœ—ì‚¬ëŒì´ ë°”ë¥´ê²Œ í–‰ë™í•´ì•¼ ì•„ë«ì‚¬ëŒë„ ë”°ë¼ í•œë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë“±ì” ë°‘ì´ ì–´ë‘¡ë‹¤", hint: "ê°€ê¹Œì´ ìˆëŠ” ê²ƒì„ ì˜¤íˆë ¤ ëª¨ë¥¸ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê°œì²œì—ì„œ ìš© ë‚œë‹¤", hint: "ë³€ë³€ì¹˜ ëª»í•œ ì§‘ì•ˆì—ì„œ í›Œë¥­í•œ ì¸ë¬¼ì´ ë‚˜ì˜¨ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê¹Œë§ˆê·€ ë‚ ì ë°° ë–¨ì–´ì§„ë‹¤", hint: "ì•„ë¬´ ê´€ê³„ì—†ëŠ” ì¼ì´ ë™ì‹œì— ì¼ì–´ë‚˜ ì˜ì‹¬ë°›ëŠ” ê²½ìš°", difficulty: "medium" },
            { text: "ì•„ë‹ˆ ë• êµ´ëšì— ì—°ê¸° ë‚ ê¹Œ", hint: "ì›ì¸ ì—†ì´ ê²°ê³¼ê°€ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë˜¥ ë¬»ì€ ê°œê°€ ê²¨ ë¬»ì€ ê°œ ë‚˜ë¬´ë€ë‹¤", hint: "ìê¸° ì˜ëª»ì€ ëª¨ë¥´ê³  ë‚¨ì˜ í—ˆë¬¼ë§Œ ë‚˜ë¬´ë€ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "êµ¬ìŠ¬ì´ ì„œ ë§ì´ë¼ë„ ê¿°ì–´ì•¼ ë³´ë°°", hint: "ì¢‹ì€ ì¬ë£Œë„ ì“¸ëª¨ ìˆê²Œ ë§Œë“¤ì–´ì•¼ ê°€ì¹˜ê°€ ìˆë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê°€ë‘ë¹„ì— ì˜· ì –ëŠ” ì¤„ ëª¨ë¥¸ë‹¤", hint: "ì‘ì€ ì¼ì´ ìŒ“ì—¬ í° ì¼ì´ ëœë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë‹­ ì«“ë˜ ê°œ ì§€ë¶• ì³ë‹¤ë³¸ë‹¤", hint: "ëª©í‘œë¥¼ ì´ë£¨ì§€ ëª»í•´ ë©í•˜ë‹ˆ ìˆë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë˜ë¡œ ì£¼ê³  ë§ë¡œ ë°›ëŠ”ë‹¤", hint: "ì ê²Œ ì£¼ê³  ë§ì´ ë°›ëŠ”ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë¡œë§ˆëŠ” í•˜ë£¨ì•„ì¹¨ì— ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ë‹¤", hint: "í° ì¼ì€ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë°”ëŠ˜ ë„ë‘‘ì´ ì†Œ ë„ë‘‘ ëœë‹¤", hint: "ì‘ì€ ì˜ëª»ì´ í° ì˜ëª»ìœ¼ë¡œ ì»¤ì§„ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë²ˆê°¯ë¶ˆì— ì½© êµ¬ì›Œ ë¨¹ëŠ”ë‹¤", hint: "ì¬ë¹ ë¥´ê²Œ ì´ìµì„ ì±™ê¸´ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë¹„ ì˜¨ ë’¤ì— ë•…ì´ êµ³ì–´ì§„ë‹¤", hint: "ì–´ë ¤ì›€ì„ ê²ªê³  ë‚˜ë©´ ë” ê°•í•´ì§„ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë¹ˆ ìˆ˜ë ˆê°€ ìš”ë€í•˜ë‹¤", hint: "ì•„ëŠ” ê²ƒì´ ì—†ëŠ” ì‚¬ëŒì´ ë” ë– ë“ ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì‚¬ê³µì´ ë§ìœ¼ë©´ ë°°ê°€ ì‚°ìœ¼ë¡œ ê°„ë‹¤", hint: "ì§€íœ˜í•˜ëŠ” ì‚¬ëŒì´ ë§ìœ¼ë©´ ì¼ì´ ì˜ëª»ëœë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì‚° ë„˜ì–´ ì‚°", hint: "ì–´ë ¤ì›€ì´ ê³„ì† ì´ì–´ì§„ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì„¸ì›”ì´ ì•½ì´ë‹¤", hint: "ì‹œê°„ì´ ì§€ë‚˜ë©´ ëª¨ë“  ê²ƒì´ í•´ê²°ëœë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì†Œë¬¸ë‚œ ì”ì¹˜ì— ë¨¹ì„ ê²ƒ ì—†ë‹¤", hint: "ê¸°ëŒ€ê°€ í¬ë©´ ì‹¤ë§ë„ í¬ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì•„ëŠ” ê¸¸ë„ ë¬¼ì–´ê°€ë¼", hint: "ì˜ ì•„ëŠ” ì¼ë„ í™•ì¸í•˜ë¼ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì—´ ê¸¸ ë¬¼ì†ì€ ì•Œì•„ë„ í•œ ê¸¸ ì‚¬ëŒ ì†ì€ ëª¨ë¥¸ë‹¤", hint: "ì‚¬ëŒì˜ ë§ˆìŒì„ ì•Œê¸° ì–´ë µë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì˜¤ë¥´ì§€ ëª»í•  ë‚˜ë¬´ëŠ” ì³ë‹¤ë³´ì§€ë„ ë§ˆë¼", hint: "ë¶ˆê°€ëŠ¥í•œ ì¼ì€ ì‹œë„í•˜ì§€ ë§ë¼ëŠ” ëœ»", difficulty: "medium" },
            { text: "ìš°ëŠ” ì•„ì´ ë–¡ í•˜ë‚˜ ë” ì¤€ë‹¤", hint: "ìš”êµ¬í•˜ëŠ” ì‚¬ëŒì´ ë” ë°›ëŠ”ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì´ì™•ì´ë©´ ë‹¤í™ì¹˜ë§ˆ", hint: "ê°™ì€ ê°’ì´ë©´ ë” ì¢‹ì€ ê²ƒì´ ë‚«ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì…ì€ ë¹„ëš¤ì–´ì ¸ë„ ë§ì€ ë°”ë¡œ í•´ë¼", hint: "ì–´ë–¤ ìƒí™©ì—ì„œë„ ì •ì§í•˜ê²Œ ë§í•˜ë¼ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì˜ë˜ë©´ ì œ íƒ“ ëª»ë˜ë©´ ì¡°ìƒ íƒ“", hint: "ì¢‹ìœ¼ë©´ ìê¸° ë•, ë‚˜ì˜ë©´ ë‚¨ íƒ“í•œë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì œ ëˆˆì˜ ì•ˆê²½", hint: "ìê¸° ë§ˆìŒì— ë“œëŠ” ì‚¬ëŒ", difficulty: "medium" },
            { text: "ì¢…ë¡œì—ì„œ ëº¨ ë§ê³  í•œê°•ì—ì„œ ëˆˆ í˜ê¸´ë‹¤", hint: "ì—‰ëš±í•œ ê³³ì—ì„œ í™”í’€ì´í•œë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ì½© ì‹¬ì€ ë° ì½© ë‚˜ê³  íŒ¥ ì‹¬ì€ ë° íŒ¥ ë‚œë‹¤", hint: "ì›ì¸ì— ë”°ë¼ ê²°ê³¼ê°€ ì˜¨ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "í•˜ë‚˜ë¥¼ ë³´ë©´ ì—´ì„ ì•ˆë‹¤", hint: "ì¼ë¶€ë§Œ ë´ë„ ì „ì²´ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "í•‘ê³„ ì—†ëŠ” ë¬´ë¤ ì—†ë‹¤", hint: "ë³€ëª…ì€ ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "í˜¸ë¯¸ë¡œ ë§‰ì„ ê²ƒì„ ê°€ë˜ë¡œ ë§‰ëŠ”ë‹¤", hint: "ì‰¬ìš´ ì¼ì„ ë¯¸ë£¨ë‹¤ ì–´ë µê²Œ ëœë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê°€ì§€ ë§ì€ ë‚˜ë¬´ì— ë°”ëŒ ì˜ ë‚  ì—†ë‹¤", hint: "ì¼ì´ ë§ìœ¼ë©´ ê±±ì •ë„ ë§ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê°œë„ ì£¼ì¸ì„ ì•ˆë‹¤", hint: "ì€í˜œë¥¼ ìŠì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê³µë“  íƒ‘ì´ ë¬´ë„ˆì§€ë´", hint: "ì—´ì‹¬íˆ í•œ ì¼ì€ í—›ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ê¿© ëŒ€ì‹  ë‹­", hint: "ì›í•˜ëŠ” ê²ƒì€ ì—†ì§€ë§Œ ë¹„ìŠ·í•œ ê²ƒìœ¼ë¡œ ëŒ€ì‹ í•œë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ë‚¨ì˜ ì”ì¹˜ì— ê° ë†“ì•„ë¼ ë°° ë†“ì•„ë¼ í•œë‹¤", hint: "ë‚¨ì˜ ì¼ì— ì“¸ë°ì—†ì´ ê°„ì„­í•œë‹¤ëŠ” ëœ»", difficulty: "medium" },
            { text: "ëˆˆ ê°€ë¦¬ê³  ì•„ì›…", hint: "ë‚¨ì„ ì†ì´ë ¤ë‹¤ ìì‹ ë§Œ ì†ì´ëŠ” ì–´ë¦¬ì„ì€ í–‰ë™", difficulty: "medium" },

            // ì–´ë ¤ì›€ (Hard) - 20ê°œ
            { text: "êµ¬ë”ê¸° ë¬´ì„œì›Œ ì¥ ëª» ë‹´ê·¸ë´", hint: "ì‘ì€ ì–´ë ¤ì›€ ë•Œë¬¸ì— í°ì¼ì„ í¬ê¸°í•˜ì§€ ë§ë¼ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë„ë‘‘ì´ ì œ ë°œ ì €ë¦¬ë‹¤", hint: "ì˜ëª»í•œ ì‚¬ëŒì´ ë¨¼ì € ë¶ˆì•ˆí•´í•œë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë§ í•œë§ˆë””ì— ì²œ ëƒ¥ ë¹šë„ ê°šëŠ”ë‹¤", hint: "ë§ì„ ì˜í•˜ë©´ í° ë„ì›€ì´ ëœë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ëª©ë§ˆë¥¸ ë†ˆì´ ìš°ë¬¼ íŒë‹¤", hint: "ì ˆì‹¤í•œ ì‚¬ëŒì´ ë¨¼ì € ë‚˜ì„ ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë­‡ ì‚¬ëŒì˜ ì…ì„ ë§‰ì§€ ëª»í•œë‹¤", hint: "ì†Œë¬¸ì€ ë§‰ì„ ìˆ˜ ì—†ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë¯¿ëŠ” ë„ë¼ì— ë°œë“± ì°íŒë‹¤", hint: "ë¯¿ë˜ ì‚¬ëŒì—ê²Œ ë°°ì‹ ë‹¹í•œë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë°”ëŠ˜ ê°€ëŠ” ë° ì‹¤ ê°„ë‹¤", hint: "ì¹œí•œ ì‚¬ëŒì€ í•­ìƒ í•¨ê»˜ ë‹¤ë‹Œë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í¬ë‹¤", hint: "ë³¸ë§ì´ ì „ë„ë˜ì—ˆë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë²™ì–´ë¦¬ ëƒ‰ê°€ìŠ´ ì•“ëŠ”ë‹¤", hint: "ì†ìœ¼ë¡œë§Œ ë™ë™ ì•“ëŠ”ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë¹› ì¢‹ì€ ê°œì‚´êµ¬", hint: "ê²‰ë§Œ ê·¸ëŸ´ë“¯í•˜ê³  ì‹¤ì†ì´ ì—†ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ì‚¼ ë…„ ê°€ë­„ì— ë³´ë¦¬ ì‹¹ ë‚˜ë“¯", hint: "ì–´ë ¤ìš´ ë•Œì— ì‘ì€ í¬ë§ì´ë¼ë„ ìƒê¸´ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ì‡ ë¿”ë„ ë‹¨ê¹€ì— ë¹¼ë¼", hint: "ì¼ì€ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ê³  ë°”ë¡œ í•˜ë¼ëŠ” ëœ»", difficulty: "hard" },
            { text: "ì¥êµ¬ë©ì—ë„ ë³• ë“¤ ë‚ ì´ ìˆë‹¤", hint: "ì–´ë ¤ìš´ ì²˜ì§€ì—ë„ ì¢‹ì€ ë‚ ì´ ì˜¨ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ì²˜ë…€ê°€ ì• ë¥¼ ë‚³ì•„ë„ í•  ë§ì´ ìˆë‹¤", hint: "ë³€ëª…ì€ ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "í•˜ëŠ˜ì€ ìŠ¤ìŠ¤ë¡œ ë•ëŠ” ìë¥¼ ë•ëŠ”ë‹¤", hint: "ë…¸ë ¥í•˜ëŠ” ì‚¬ëŒì—ê²Œ ê¸°íšŒê°€ ì˜¨ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "í˜¸ë‘ì´ êµ´ì— ê°€ì•¼ í˜¸ë‘ì´ ìƒˆë¼ë¥¼ ì¡ëŠ”ë‹¤", hint: "ìœ„í—˜ì„ ê°ìˆ˜í•´ì•¼ í° ê²ƒì„ ì–»ëŠ”ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "í›‘ì–´ ê°ˆ ê²Œ ë»”í•œë° ì”¨ì•—ì„ ê°–ë‹¤ ë²„ë¦°ë‹¤", hint: "í—›ëœ ì¼ì„ í•œë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ê°€ëŠ” ë‚ ì´ ì¥ë‚ ", hint: "ìš°ì—°íˆ ì¼ì´ ë§ì•„ë–¨ì–´ì§„ë‹¤ëŠ” ëœ»", difficulty: "hard" },
            { text: "ë‚®ë§ì€ ë‚®ì— í•˜ê³  ë°¤ë§ì€ ë°¤ì— í•œë‹¤", hint: "ë•Œì™€ ì¥ì†Œë¥¼ ê°€ë ¤ì„œ ë§í•˜ë¼ëŠ” ëœ»", difficulty: "hard" },
            { text: "ëˆ„ì›Œì„œ ì¹¨ ë±‰ê¸°", hint: "ë‚¨ì„ í•´ì¹˜ë ¤ë‹¤ ìê¸°ê°€ í•´ë¥¼ ì…ëŠ”ë‹¤ëŠ” ëœ»", difficulty: "hard" }
        ];

        let gameState = {
            mode: 'menu',
            currentProverb: null,
            userAnswer: '',
            score: 0,
            lives: 3,
            hintsUsed: 0,
            showHint: false,
            feedback: '',
            questionNumber: 1,
            totalQuestions: 10,
            gameOver: false,
            correctAnswers: 0,
            timeLeft: 30,
            usedProverbs: [],
            timer: null,
            audioContext: null,
            tickSound: null
        };

        // ì´ˆì‹œê³„ ì†Œë¦¬ ìƒì„±
        function createTickSound() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            gameState.audioContext = new AudioContext();
        }

        function playTick() {
            if (!gameState.audioContext) return;
            
            const now = gameState.audioContext.currentTime;
            
            // ì²« ë²ˆì§¸ ì§¸ê¹ (ë†’ì€ ìŒ)
            const osc1 = gameState.audioContext.createOscillator();
            const gain1 = gameState.audioContext.createGain();
            osc1.connect(gain1);
            gain1.connect(gameState.audioContext.destination);
            osc1.frequency.value = 1200;
            osc1.type = 'square';
            gain1.gain.setValueAtTime(0.15, now);
            gain1.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
            osc1.start(now);
            osc1.stop(now + 0.05);
            
            // ë‘ ë²ˆì§¸ ì§¸ê¹ (ë‚®ì€ ìŒ) - 0.5ì´ˆ í›„
            setTimeout(() => {
                if (!gameState.audioContext) return;
                const now2 = gameState.audioContext.currentTime;
                const osc2 = gameState.audioContext.createOscillator();
                const gain2 = gameState.audioContext.createGain();
                osc2.connect(gain2);
                gain2.connect(gameState.audioContext.destination);
                osc2.frequency.value = 800;
                osc2.type = 'square';
                gain2.gain.setValueAtTime(0.15, now2);
                gain2.gain.exponentialRampToValueAtTime(0.01, now2 + 0.05);
                osc2.start(now2);
                osc2.stop(now2 + 0.05);
            }, 500);
        }

        function playScream() {
            if (!gameState.audioContext) return;
            
            const now = gameState.audioContext.currentTime;
            const duration = 0.8;
            
            // ë¹„ëª… ì†Œë¦¬ ì‹œë®¬ë ˆì´ì…˜ (ë†’ì€ ì£¼íŒŒìˆ˜ì—ì„œ ë‚®ì•„ì§€ëŠ”)
            const osc = gameState.audioContext.createOscillator();
            const gain = gameState.audioContext.createGain();
            const filter = gameState.audioContext.createBiquadFilter();
            
            osc.connect(filter);
            filter.connect(gain);
            gain.connect(gameState.audioContext.destination);
            
            // ì£¼íŒŒìˆ˜: ë†’ì€ ìŒì—ì„œ ë‚®ì€ ìŒìœ¼ë¡œ
            osc.frequency.setValueAtTime(1800, now);
            osc.frequency.exponentialRampToValueAtTime(400, now + duration);
            osc.type = 'sawtooth';
            
            // í•„í„°ë¡œ ë‚ ì¹´ë¡œìš´ ì†Œë¦¬ ë§Œë“¤ê¸°
            filter.type = 'bandpass';
            filter.frequency.setValueAtTime(2000, now);
            filter.frequency.exponentialRampToValueAtTime(600, now + duration);
            filter.Q.value = 5;
            
            // ë³¼ë¥¨: ê¸‰ê²©íˆ ì˜¬ë¼ê°”ë‹¤ê°€ ì„œì„œíˆ ê°ì†Œ
            gain.gain.setValueAtTime(0, now);
            gain.gain.linearRampToValueAtTime(0.3, now + 0.1);
            gain.gain.exponentialRampToValueAtTime(0.01, now + duration);
            
            osc.start(now);
            osc.stop(now + duration);
            
            // ì¶”ê°€ ë…¸ì´ì¦ˆ ë ˆì´ì–´
            const noiseBuffer = gameState.audioContext.createBuffer(1, gameState.audioContext.sampleRate * duration, gameState.audioContext.sampleRate);
            const noiseData = noiseBuffer.getChannelData(0);
            for (let i = 0; i < noiseData.length; i++) {
                noiseData[i] = Math.random() * 2 - 1;
            }
            
            const noiseSource = gameState.audioContext.createBufferSource();
            const noiseGain = gameState.audioContext.createGain();
            const noiseFilter = gameState.audioContext.createBiquadFilter();
            
            noiseSource.buffer = noiseBuffer;
            noiseSource.connect(noiseFilter);
            noiseFilter.connect(noiseGain);
            noiseGain.connect(gameState.audioContext.destination);
            
            noiseFilter.type = 'highpass';
            noiseFilter.frequency.value = 1000;
            
            noiseGain.gain.setValueAtTime(0, now);
            noiseGain.gain.linearRampToValueAtTime(0.1, now + 0.1);
            noiseGain.gain.exponentialRampToValueAtTime(0.01, now + duration);
            
            noiseSource.start(now);
        }

        function getInitials(text) {
            const cho = ["ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
            return text.split('').map(char => {
                if (char === ' ') return ' ';
                const code = char.charCodeAt(0) - 0xAC00;
                if (code > -1 && code < 11172) return cho[Math.floor(code / 588)];
                return char;
            }).join('');
        }

        function startGame(mode) {
            createTickSound();
            gameState = {
                ...gameState,
                mode: mode,
                score: 0,
                lives: 3,
                questionNumber: 1,
                gameOver: false,
                correctAnswers: 0,
                usedProverbs: []
            };
            loadNewProverb();
            render();
        }

        function loadNewProverb() {
            const availableProverbs = proverbs.filter(p => !gameState.usedProverbs.includes(p.text));
            if (availableProverbs.length === 0) {
                gameState.gameOver = true;
                render();
                return;
            }
            const randomProverb = availableProverbs[Math.floor(Math.random() * availableProverbs.length)];
            gameState.currentProverb = randomProverb;
            gameState.userAnswer = ''; // ë‹µë³€ ì´ˆê¸°í™”
            gameState.hintsUsed = 0;
            gameState.showHint = false;
            gameState.feedback = '';
            gameState.timeLeft = 30;
            gameState.usedProverbs.push(randomProverb.text);
            
            if (gameState.timer) clearInterval(gameState.timer);
            if (gameState.mode === 'challenge') {
                gameState.timer = setInterval(() => {
                    gameState.timeLeft--;
                    
                    if (gameState.timeLeft <= 10 && gameState.timeLeft > 0) {
                        playTick();
                    }
                    
                    if (gameState.timeLeft <= 0) {
                        handleWrongAnswer();
                    } else {
                        updateTimer();
                    }
                }, 1000);
            }
        }

        function normalizeText(text) {
            return text.replace(/\s/g, '').toLowerCase();
        }

        function updateTimer() {
            const timerDisplay = document.querySelector('.timer-display');
            const timerBar = document.querySelector('.timer-bar');
            
            if (timerDisplay && timerBar && gameState.mode === 'challenge') {
                const isWarning = gameState.timeLeft <= 10;
                const timerPercentage = (gameState.timeLeft / 30) * 100;
                
                timerDisplay.textContent = `â±ï¸ ${gameState.timeLeft}ì´ˆ`;
                timerDisplay.className = `timer-display ${isWarning ? 'warning' : ''}`;
                timerBar.style.width = `${timerPercentage}%`;
                timerBar.className = `timer-bar ${isWarning ? 'warning' : ''}`;
            }
        }

        function handleSubmit() {
            if (!gameState.userAnswer.trim() || gameState.feedback) return;

            const input = document.querySelector('#answerInput');
            if (input) {
                gameState.userAnswer = input.value;
            }

            const normalized = normalizeText(gameState.userAnswer);
            const correctNormalized = normalizeText(gameState.currentProverb.text);

            if (normalized === correctNormalized) {
                let points = 100;
                if (gameState.hintsUsed === 0) points += 50;
                if (gameState.mode === 'challenge') points += gameState.timeLeft * 2;
                
                gameState.score += points;
                gameState.correctAnswers++;
                gameState.feedback = `ì •ë‹µì…ë‹ˆë‹¤! +${points}ì `;
                
                if (gameState.timer) clearInterval(gameState.timer);
                
                render();
                
                setTimeout(() => {
                    if (gameState.questionNumber >= gameState.totalQuestions) {
                        gameState.gameOver = true;
                    } else {
                        gameState.questionNumber++;
                        loadNewProverb();
                    }
                    render();
                }, 1500);
            } else {
                handleWrongAnswer();
            }
        }

        function handleWrongAnswer() {
            gameState.lives--;
            gameState.feedback = `í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µ: ${gameState.currentProverb.text}`;
            
            if (gameState.timer) clearInterval(gameState.timer);
            
            // ë¹„ëª… ì†Œë¦¬ ì¬ìƒ
            playScream();
            
            setTimeout(() => {
                if (gameState.lives <= 0 || gameState.questionNumber >= gameState.totalQuestions) {
                    gameState.gameOver = true;
                } else {
                    gameState.questionNumber++;
                    loadNewProverb();
                }
                render();
            }, 2000);
            render();
        }

        function skipQuestion() {
            if (gameState.feedback) return;
            
            gameState.lives--;
            gameState.feedback = `ê±´ë„ˆë›°ê¸°! ì •ë‹µ: ${gameState.currentProverb.text}`;
            
            if (gameState.timer) clearInterval(gameState.timer);
            
            setTimeout(() => {
                if (gameState.lives <= 0 || gameState.questionNumber >= gameState.totalQuestions) {
                    gameState.gameOver = true;
                } else {
                    gameState.questionNumber++;
                    loadNewProverb();
                }
                render();
            }, 2000);
            render();
        }

        function useHint() {
            if (gameState.hintsUsed < 1 && !gameState.feedback) {
                gameState.hintsUsed++;
                gameState.showHint = true;
                gameState.score = Math.max(0, gameState.score - 20);
                render();
            }
        }

        function getRank() {
            const percentage = (gameState.correctAnswers / gameState.totalQuestions) * 100;
            if (percentage >= 90) return 'S';
            if (percentage >= 80) return 'A';
            if (percentage >= 70) return 'B';
            if (percentage >= 60) return 'C';
            return 'D';
        }

        function render() {
            const app = document.getElementById('app');
            
            if (gameState.mode === 'menu') {
                app.innerHTML = `
                    <h1>ğŸ® ì´ˆì„± ì†ë‹´ ë§ì¶”ê¸°</h1>
                    <p class="subtitle">ì´ˆì„±ì„ ë³´ê³  ì†ë‹´ì„ ë§ì¶°ë³´ì„¸ìš”!</p>
                    
                    <div class="menu-buttons">
                        <button class="btn btn-practice" onclick="startGame('practice')">
                            ğŸ“š ì—°ìŠµ ëª¨ë“œ
                            <div class="small-text">ì‹œê°„ ì œí•œ ì—†ì´ ììœ ë¡­ê²Œ</div>
                        </button>
                        <button class="btn btn-challenge" onclick="startGame('challenge')">
                            ğŸ† ë„ì „ ëª¨ë“œ
                            <div class="small-text">10ë¬¸ì œ / 30ì´ˆ ì œí•œ</div>
                        </button>
                    </div>
                    
                    <p class="tip">ğŸ’¡ ë„ì–´ì“°ê¸°ëŠ” ë¬´ì‹œë©ë‹ˆë‹¤</p>
                `;
            } else if (gameState.gameOver) {
                app.innerHTML = `
                    <div class="result-box">
                        <div class="trophy">ğŸ†</div>
                        <h1>ê²Œì„ ì¢…ë£Œ!</h1>
                        <div class="rank">${gameState.score}ì </div>
                        
                        <div class="stats">
                            <div class="stat-item">ì •ë‹µë¥ : <strong style="color: #28a745">${gameState.correctAnswers}/${gameState.totalQuestions}</strong></div>
                            <div class="stat-item">ì •ë‹µ: <strong style="color: #2ecc71">${gameState.correctAnswers}ê°œ</strong></div>
                            <div class="stat-item">ì˜¤ë‹µ: <strong style="color: #e74c3c">${gameState.totalQuestions - gameState.correctAnswers}ê°œ</strong></div>
                        </div>

                        <button class="btn btn-primary" onclick="gameState.mode='menu'; render();">
                            ğŸ  ë©”ì¸ ë©”ë‰´ë¡œ
                        </button>
                    </div>
                `;
            } else {
                const heartsHtml = Array(3).fill(0).map((_, i) => 
                    `<span class="heart ${i >= gameState.lives ? 'empty' : ''}">â¤ï¸</span>`
                ).join('');

                const timerPercentage = (gameState.timeLeft / 30) * 100;
                const isWarning = gameState.timeLeft <= 10;

                app.innerHTML = `
                    <div class="game-header">
                        <div class="lives">${heartsHtml}</div>
                        <div class="question-info">
                            <div>ë¬¸ì œ ${gameState.questionNumber}/${gameState.totalQuestions}</div>
                            ${gameState.mode === 'challenge' ? `
                                <div class="timer-container">
                                    <div class="timer-display ${isWarning ? 'warning' : ''}">
                                        â±ï¸ ${gameState.timeLeft}ì´ˆ
                                    </div>
                                    <div class="timer-bar-container">
                                        <div class="timer-bar ${isWarning ? 'warning' : ''}" style="width: ${timerPercentage}%"></div>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                        <div class="score">
                            <span class="star">â­</span>
                            <span>${gameState.score}</span>
                        </div>
                    </div>

                    <div class="initials-box">
                        <div class="initials">${getInitials(gameState.currentProverb.text)}</div>
                    </div>

                    ${gameState.showHint ? `
                        <div class="hint-box">
                            ğŸ’¡ ${gameState.currentProverb.hint}
                        </div>
                    ` : ''}

                    ${gameState.feedback ? `
                        <div class="feedback ${gameState.feedback.includes('ì •ë‹µ') ? 'correct' : 'wrong'}">
                            ${gameState.feedback}
                        </div>
                    ` : ''}

                    <input 
                        type="text" 
                        class="input-box" 
                        id="answerInput"
                        placeholder="ì†ë‹´ì„ ì…ë ¥í•˜ì„¸ìš”"
                        ${gameState.feedback ? 'disabled' : ''}
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        spellcheck="false"
                    >

                    <div class="button-group">
                        <button 
                            class="btn btn-hint" 
                            onclick="useHint()"
                            ${gameState.hintsUsed >= 1 || gameState.feedback ? 'disabled' : ''}
                        >
                            ğŸ’¡ íŒíŠ¸
                        </button>
                        <button 
                            class="btn btn-submit" 
                            onclick="handleSubmit()"
                            ${gameState.feedback ? 'disabled' : ''}
                        >
                            âœ… ì •ë‹µ í™•ì¸
                        </button>
                        <button 
                            class="btn btn-skip" 
                            onclick="skipQuestion()"
                            ${gameState.feedback ? 'disabled' : ''}
                        >
                            â­ï¸ ê±´ë„ˆë›°ê¸°
                        </button>
                    </div>
                    <div class="back-button-row">
                        <button class="btn btn-back" onclick="if(gameState.timer) clearInterval(gameState.timer); gameState.mode='menu'; render();">
                            ğŸ”™ ë©”ë‰´ë¡œ
                        </button>
                    </div>
                `;

                setTimeout(() => {
                    const input = document.querySelector('#answerInput');
                    if (input) {
                        // ê¸°ì¡´ ê°’ ì„¤ì • (ìƒˆë¡œê³ ì¹¨ì´ ì•„ë‹Œ ê²½ìš°)
                        if (gameState.userAnswer) {
                            input.value = gameState.userAnswer;
                        }
                        
                        // ì…ë ¥ ì´ë²¤íŠ¸ - ë‹¨ìˆœíˆ ì €ì¥ë§Œ
                        input.addEventListener('input', (e) => {
                            gameState.userAnswer = e.target.value;
                        });
                        
                        // Enter í‚¤ ì´ë²¤íŠ¸
                        input.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') {
                                handleSubmit();
                            }
                        });
                        
                        // PCì—ì„œë§Œ ìë™ í¬ì»¤ìŠ¤
                        if (window.innerWidth > 768 && !gameState.feedback) {
                            input.focus();
                        }
                    }
                }, 50);
            }
        }

        render();
    </script>
</body>
</html>
